<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EduKids Africa - Curriculum</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 font-sans">

  <div class="max-w-4xl mx-auto p-6">
    <h1 class="text-2xl font-bold mb-6 text-center text-indigo-700">Curriculum by Subject</h1>
    <div id="subjectsContainer" class="space-y-4"></div>
  </div>

  <!-- Modal -->
  <div id="modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="bg-white rounded-lg shadow-lg max-w-lg w-full p-6 relative">
      <button id="closeModal" class="absolute top-2 right-2 text-gray-500 hover:text-red-500">âœ–</button>
      <h2 id="modalTitle" class="text-xl font-semibold text-indigo-700 mb-4"></h2>
      <ul id="topicsList" class="space-y-2"></ul>
    </div>
  </div>

  <script>
    async function loadCurriculum() {
      const res = await fetch("curriculum.json");
      const data = await res.json();

      const container = document.getElementById("subjectsContainer");

      Object.keys(data).forEach(subject => {
        const subjectDiv = document.createElement("div");
        subjectDiv.className = "bg-white p-4 rounded-lg shadow";

        const subjectTitle = document.createElement("h2");
        subjectTitle.textContent = subject;
        subjectTitle.className = "text-lg font-semibold text-indigo-600 mb-2";

        const classesDiv = document.createElement("div");
        classesDiv.className = "space-y-2";

        Object.keys(data[subject]).forEach(cls => {
          const btn = document.createElement("button");
          btn.textContent = cls;
          btn.className = "w-full text-left px-4 py-2 bg-indigo-100 rounded hover:bg-indigo-200 transition";
          btn.addEventListener("click", () => openModal(subject, cls, data[subject][cls]));
          classesDiv.appendChild(btn);
        });

        subjectDiv.appendChild(subjectTitle);
        subjectDiv.appendChild(classesDiv);
        container.appendChild(subjectDiv);
      });
    }

    function openModal(subject, cls, topics) {
      document.getElementById("modalTitle").textContent = `${subject} - ${cls}`;
      const topicsList = document.getElementById("topicsList");
      topicsList.innerHTML = "";

      topics.forEach(topic => {
        const li = document.createElement("li");
        li.innerHTML = `<a href="topics-details.html?id=${topic.id}" class="text-indigo-600 hover:underline">${topic.title}</a>`;
        topicsList.appendChild(li);
      });

      document.getElementById("modal").classList.remove("hidden");
    }

    document.getElementById("closeModal").addEventListener("click", () => {
      document.getElementById("modal").classList.add("hidden");
    });

    loadCurriculum();
  </script>
</body>
</html>
