<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Topics Details</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .content-collapsed {
      max-height: 80px;
      overflow: hidden;
      position: relative;
    }
    .fade-bottom {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 30px;
      background: linear-gradient(to top, white, transparent);
    }
  </style>
</head>
<body class="bg-gray-50 font-sans">

  <div class="max-w-4xl mx-auto py-8 px-4">
    <h1 id="pageTitle" class="text-2xl font-bold text-purple-700 mb-6">Loading...</h1>

    <!-- Topics container -->
    <div id="topicsContainer" class="grid gap-4"></div>

    <!-- Back button -->
    <div class="mt-8">
      <a href="subjects-curric.html" class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300">â¬… Back to Classes</a>
    </div>
  </div>

<script>
function getQueryParams() {
  const urlParams = new URLSearchParams(window.location.search);
  return {
    year: urlParams.get('year'),
    subject: urlParams.get('subject'),
    topic: urlParams.get('topic')
  };
}

async function loadTopics() {
  const { year, subject, topic } = getQueryParams();
  const pageTitle = document.getElementById('pageTitle');
  const container = document.getElementById('topicsContainer');

  if (!year || !subject) {
    pageTitle.textContent = "Error: Missing parameters";
    container.innerHTML = "<p class='text-red-600'>Year or Subject not specified.</p>";
    return;
  }

  pageTitle.textContent = `${year} - ${subject.replace(/-/g, ' ')} Topics`;
  container.innerHTML = "<p class='text-gray-500'>Loading topics...</p>";

  try {
    const res = await fetch(`Lessons/${year}/${subject}/topics-details.json`);
    const data = await res.json();
    const topics = Array.isArray(data) ? data : data.topics || [];

    container.innerHTML = '';

    if (!topics.length) {
      container.innerHTML = "<p class='text-red-600'>No topics found for this subject.</p>";
      return;
    }

    topics.forEach(t => {
      const topicObj = typeof t === 'string' ? { id: t.toLowerCase().replace(/\s+/g, '_'), title: t } : t;

      const div = document.createElement('div');
      div.className = "p-4 bg-white shadow rounded";

      if (topic && topicObj.id === topic) {
        const content = topicObj.content || "Content coming soon...";
        div.innerHTML = `
          <h2 class="text-lg font-semibold text-purple-700">${topicObj.title}</h2>
          <div class="relative mt-2 content-collapsed">
            <p class="text-gray-600">${content}</p>
            <div class="fade-bottom"></div>
          </div>
          <button class="mt-2 text-sm text-purple-600 hover:underline read-more-btn">Read More</button>
        `;
      } else {
        div.innerHTML = `<a href="topics-details.html?year=${encodeURIComponent(year)}&subject=${encodeURIComponent(subject)}&topic=${encodeURIComponent(topicObj.id)}"
                          class="block text-purple-600 font-medium hover:underline">ðŸ“˜ ${topicObj.title}</a>`;
      }

      container.appendChild(div);
    });

    // Add toggle for Read More buttons
    document.querySelectorAll(".read-more-btn").forEach(btn => {
      btn.addEventListener("click", function () {
        const contentBox = this.previousElementSibling;
        contentBox.classList.toggle("content-collapsed");
        const fade = contentBox.querySelector(".fade-bottom");
        if (fade) fade.remove();
        this.textContent = this.textContent === "Read More" ? "Show Less" : "Read More";
      });
    });

  } catch (err) {
    container.innerHTML = "<p class='text-red-600'>Error loading topics file.</p>";
  }
}

document.addEventListener('DOMContentLoaded', loadTopics);
</script>
</body>
</html>












<!--
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Topics Details</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Disable right click & copy
    document.addEventListener("contextmenu", e => e.preventDefault());
    document.addEventListener("copy", e => {
      e.preventDefault();
      alert("Copying is disabled on this page.");
    });
  </script>
</head>
<body class="bg-gray-50 font-sans">

  <div class="max-w-4xl mx-auto py-8 px-4">
    <h1 id="pageTitle" class="text-2xl font-bold text-purple-700 mb-6">Loading...</h1>

    <!-- Scrollable panel --
    <div class="border border-gray-300 rounded-lg shadow bg-white h-[70vh] overflow-y-auto p-4">
      <div id="topicsContainer" class="grid gap-4"></div>
    </div>

    <!-- Back button --
    <div class="mt-8">
      <a href="subjects-curric.html" class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300">
        â¬… Back to Classes
      </a>
    </div>
  </div>

<script>
function getQueryParams() {
  const urlParams = new URLSearchParams(window.location.search);
  return {
    year: urlParams.get('year'),
    subject: urlParams.get('subject'),
    topic: urlParams.get('topic')
  };
}

async function loadTopics() {
  const { year, subject, topic } = getQueryParams();
  const pageTitle = document.getElementById('pageTitle');
  const container = document.getElementById('topicsContainer');

  if (!year || !subject) {
    pageTitle.textContent = "Error: Missing parameters";
    container.innerHTML = "<p class='text-red-600'>Year or Subject not specified.</p>";
    return;
  }

  pageTitle.textContent = `${year} - ${subject.replace(/-/g, ' ')} Topics`;
  container.innerHTML = "<p class='text-gray-500'>Loading topics...</p>";

  try {
    const res = await fetch(`Lessons/${year}/${subject}/topics-details.json`);
    const data = await res.json();
    const topics = Array.isArray(data) ? data : data.topics || [];

    container.innerHTML = '';

    if (!topics.length) {
      container.innerHTML = "<p class='text-red-600'>No topics found for this subject.</p>";
      return;
    }

    topics.forEach(t => {
      const topicObj = typeof t === 'string'
        ? { id: t.toLowerCase().replace(/\s+/g, '_'), title: t }
        : t;

      const div = document.createElement('div');
      div.className = "p-4 bg-gray-50 border border-gray-200 rounded hover:bg-purple-50 cursor-pointer";

      if (topic && topicObj.id === topic) {
        div.innerHTML = `
          <h2 class="text-lg font-semibold text-purple-700">${topicObj.title}</h2>
          <p class="text-gray-600 mt-2">${topicObj.content || "Content coming soon..."}</p>
        `;
      } else {
        div.innerHTML = `
          <a href="topics-details.html?year=${encodeURIComponent(year)}&subject=${encodeURIComponent(subject)}&topic=${encodeURIComponent(topicObj.id)}"
             class="block text-purple-600 font-medium hover:underline">ðŸ“˜ ${topicObj.title}</a>
        `;
      }

      container.appendChild(div);
    });
  } catch (err) {
    container.innerHTML = "<p class='text-red-600'>Error loading topics file.</p>";
  }
}

document.addEventListener('DOMContentLoaded', loadTopics);
</script>
</body>
</html>




<!--
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Topics Details</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Disable right click & copy
    document.addEventListener("contextmenu", e => e.preventDefault());
    document.addEventListener("copy", e => {
      e.preventDefault();
      alert("Copying is disabled on this page.");
    });
  </script>
</head>
<body class="bg-gray-50 font-sans">

  <div class="max-w-4xl mx-auto py-8 px-4">
    <h1 id="pageTitle" class="text-2xl font-bold text-purple-700 mb-6">Loading...</h1>

    <!-- Topics container --
    <div id="topicsContainer" class="grid gap-4"></div>

    <!-- Back button --1
    <div class="mt-8">
      <a href="subjects-curric.html" class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300">
        â¬… Back to Classes
      </a>
    </div>
  </div>

<script>
function getQueryParams() {
  const urlParams = new URLSearchParams(window.location.search);
  return {
    year: urlParams.get('year'),
    subject: urlParams.get('subject'),
    topic: urlParams.get('topic')
  };
}

async function loadTopics() {
  const { year, subject, topic } = getQueryParams();
  const pageTitle = document.getElementById('pageTitle');
  const container = document.getElementById('topicsContainer');

  if (!year || !subject) {
    pageTitle.textContent = "Error: Missing parameters";
    container.innerHTML = "<p class='text-red-600'>Year or Subject not specified.</p>";
    return;
  }

  pageTitle.textContent = `${year} - ${subject.replace(/-/g, ' ')} Topics`;
  container.innerHTML = "<p class='text-gray-500'>Loading topics...</p>";

  try {
    const res = await fetch(`Lessons/${year}/${subject}/topics-details.json`);
    const data = await res.json();
    const topics = Array.isArray(data) ? data : data.topics || [];

    container.innerHTML = '';

    if (!topics.length) {
      container.innerHTML = "<p class='text-red-600'>No topics found for this subject.</p>";
      return;
    }

    topics.forEach(t => {
      const topicObj = typeof t === 'string'
        ? { id: t.toLowerCase().replace(/\s+/g, '_'), title: t }
        : t;

      const div = document.createElement('div');
      div.className = "p-4 bg-white shadow rounded hover:bg-purple-50 cursor-pointer";

      if (topic && topicObj.id === topic) {
        div.innerHTML = `
          <h2 class="text-lg font-semibold text-purple-700">${topicObj.title}</h2>
          <p class="text-gray-600 mt-2">${topicObj.content || "Content coming soon..."}</p>
        `;
      } else {
        div.innerHTML = `
          <a href="topics-details.html?year=${encodeURIComponent(year)}&subject=${encodeURIComponent(subject)}&topic=${encodeURIComponent(topicObj.id)}"
             class="block text-purple-600 font-medium hover:underline">ðŸ“˜ ${topicObj.title}</a>
        `;
      }

      container.appendChild(div);
    });
  } catch (err) {
    container.innerHTML = "<p class='text-red-600'>Error loading topics file.</p>";
  }
}

document.addEventListener('DOMContentLoaded', loadTopics);
</script>
</body>
</html>
