

<!--
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Topics Details</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 font-sans">

  <div class="max-w-4xl mx-auto py-8 px-4">
    <h1 id="pageTitle" class="text-2xl font-bold text-purple-700 mb-6">Loading...</h1>

    <!-- Topics container --
    <div id="topicsContainer" class="grid gap-4"></div>

    <!-- Back button --
    <div class="mt-8">
      <a href="subjects-curric.html" class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300">â¬… Back to Classes</a>
    </div>
  </div>

<script>
function getQueryParams() {
  const urlParams = new URLSearchParams(window.location.search);
  return {
    year: urlParams.get('year'),
    subject: urlParams.get('subject'),
    topic: urlParams.get('topic')
  };
}

async function loadTopics() {
  const { year, subject, topic } = getQueryParams();
  const pageTitle = document.getElementById('pageTitle');
  const container = document.getElementById('topicsContainer');

  if (!year || !subject) {
    pageTitle.textContent = "Error: Missing parameters";
    container.innerHTML = "<p class='text-red-600'>Year or Subject not specified.</p>";
    return;
  }

  pageTitle.textContent = `${year} - ${subject.replace(/-/g, ' ')} Topics`;
  container.innerHTML = "<p class='text-gray-500'>Loading topics...</p>";

  try {
    const res = await fetch(`Lessons/${year}/${subject}/topics-details.json`);
    const topics = await res.json();

    container.innerHTML = '';

    if (!topics.length) {
      container.innerHTML = "<p class='text-red-600'>No topics found for this subject.</p>";
      return;
    }

    topics.forEach(t => {
      const div = document.createElement('div');
      div.className = "p-4 bg-white shadow rounded";

      // If viewing a single topic
      if (topic && t.id === topic) {
        div.innerHTML = `
          <h2 class="text-xl font-semibold text-purple-700 mb-2">${t.title}</h2>
          ${t.image ? `<img src="${t.image}" alt="${t.title}" class="w-48 mb-3 rounded">` : ""}
          <div class="text-gray-700 mb-3">${t.content}</div>
          ${t.examples && t.examples.length ? `
            <h3 class="font-semibold text-gray-800">Examples:</h3>
            <ul class="list-disc list-inside text-gray-600">
              ${t.examples.map(ex => `<li>${ex}</li>`).join('')}
            </ul>
          ` : ""}
        `;
      } else if (!topic) {
        // List mode
        div.innerHTML = `
          <a href="topics-details.html?year=${encodeURIComponent(year)}&subject=${encodeURIComponent(subject)}&topic=${encodeURIComponent(t.id)}"
             class="block text-purple-600 font-medium hover:underline">ðŸ“˜ ${t.title}</a>
        `;
      }

      container.appendChild(div);
    });

    // If a specific topic was requested but not found
    if (topic && !topics.find(x => x.id === topic)) {
      container.innerHTML = "<p class='text-red-600'>Topic not found.</p>";
    }
  } catch (err) {
    container.innerHTML = "<p class='text-red-600'>Error loading topics file.</p>";
  }
}

document.addEventListener('DOMContentLoaded', loadTopics);
</script>
</body>
</html>

-->







<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Topics Details</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 font-sans">

  <div class="max-w-4xl mx-auto py-8 px-4">
    <h1 id="pageTitle" class="text-2xl font-bold text-purple-700 mb-6">Loading...</h1>

    <!-- Topics container -->
    <div id="topicsContainer" class="grid gap-4"></div>

    <!-- Back button -->
    <div class="mt-8">
      <a href="subjects-curric.html" class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300">â¬… Back to Classes</a>
    </div>
  </div>

<script>
function getQueryParams() {
  const urlParams = new URLSearchParams(window.location.search);
  return {
    year: urlParams.get('year'),
    subject: urlParams.get('subject'),
    topic: urlParams.get('topic')
  };
}

async function loadTopics() {
  const { year, subject, topic } = getQueryParams();
  const pageTitle = document.getElementById('pageTitle');
  const container = document.getElementById('topicsContainer');

  if (!year || !subject) {
    pageTitle.textContent = "Error: Missing parameters";
    container.innerHTML = "<p class='text-red-600'>Year or Subject not specified.</p>";
    return;
  }

  pageTitle.textContent = `${year} - ${subject.replace(/-/g, ' ')} Topics`;
  container.innerHTML = "<p class='text-gray-500'>Loading topics...</p>";

  try {
    const res = await fetch(`Lessons/${year}/${subject}/topics-details.json`);
    const data = await res.json();
    const topics = Array.isArray(data) ? data : data.topics || [];

    container.innerHTML = '';

    if (!topics.length) {
      container.innerHTML = "<p class='text-red-600'>No topics found for this subject.</p>";
      return;
    }

    topics.forEach(t => {
      const topicObj = typeof t === 'string' ? { id: t.toLowerCase().replace(/\s+/g, '_'), title: t } : t;

      const div = document.createElement('div');
      div.className = "p-4 bg-white shadow rounded hover:bg-purple-50 cursor-pointer";

      if (topic && topicObj.id === topic) {
        div.innerHTML = `<h2 class="text-lg font-semibold text-purple-700">${topicObj.title}</h2>
                         <p class="text-gray-600 mt-2">${topicObj.content || "Content coming soon..."}</p>`;
      } else {
        div.innerHTML = `<a href="topics-details.html?year=${encodeURIComponent(year)}&subject=${encodeURIComponent(subject)}&topic=${encodeURIComponent(topicObj.id)}"
                          class="block text-purple-600 font-medium hover:underline">ðŸ“˜ ${topicObj.title}</a>`;
      }

      container.appendChild(div);
    });
  } catch (err) {
    container.innerHTML = "<p class='text-red-600'>Error loading topics file.</p>";
  }
}

document.addEventListener('DOMContentLoaded', loadTopics);
</script>
</body>
</html>
